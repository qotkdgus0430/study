<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script type="text/javascript">
		//fetch(url).then(response=> { handle the response }).catch(error=>{ handle the error })
	
		/*
			fetch('target URL') // url 입력 (GET 방식)
			.then(res=>res.json()) // 응답 결과를   json 파싱
			.then(data=> {
				 응답 결과를 처리 과정....
				 data.속성명
				 console.log(data)
			}).catch(err => {
				console.log('Fetch Error' , err);				
			});

		
		   fetch('target URL') // url 입력 (GET 방식)
			.then(res=>res.text()) // 응답 결과를   Text  파싱
			.then(data=> {
				 응답 결과를 처리 과정....
				 data.속성명
				 console.log(data)
			}).catch(err => {
				console.log('Fetch Error' , err);				
			});
		
		*/
		
		/*
		fetch('https://jsonplaceholder.typicode.com/posts/1')
		.then(res=>res.json())
		.then(data=>{
			console.log(data);
		});
		*/
		/*
		fetch('https://jsonplaceholder.typicode.com/posts/1')
		.then(res=>res.text())
		.then(data=>{
			console.log(data);
		});
		*/
		
		/*
		//https://cafe.naver.com/f-e/cafes/31387938/articles/674?boardtype=L&menuid=28&referrerAllArticles=false
		async function fetchText(){ // 순서를 보장 .... 
			let response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
			let data = await response.text();
			console.log(data);
		}
		fetchText(); //호출
		
		//******일반적인 비동기 처리 fetch()
		//******여러개의 비동기 순차적으로 실행 async function fetchText()
		
		처리하는 코드 샘플 
		https://www.javascripttutorial.net/web-apis/javascript-fetch-api/
		*/
		
		//한개 짜리 비동기
		/*
		fetch("https://jsonplaceholder.typicode.com/posts/1")
		.then(response => response.json())
		.then(json=> console.log(json)); //가공처리
		*/
		/*
		fetch('https://jsonplaceholder.typicode.com/posts',{  //fetch 두번째 parameter 옵션
			//옵션 : json객체 형태 지정
			method:"POST",
			headers:{"Content-Type":"application/json"},
			//body 안에 payload(전송되는 데이터) 넣기
			body:JSON.stringify({
				title:"Test",
				body:"i am superman",
				userId:1
			}),
		}).then((response) => response.json())  //id 101 성공(insert )
		  .then((data)=> console.log(data));
		*/
		
		async function run(){
			const res = await fetch('https://jsonplaceholder.typicode.com/posts',{
				method:"POST",
				body:JSON.stringify({
					title:"HI",
					body:"NICE",
					userId:1
				}),
				headers:{"Content-Type":"application/json"},
			})
			
			const payload = await res.json();
			console.log(payload);
		}
		run();
	</script>
</head>
<body>
  
</body>
</html>